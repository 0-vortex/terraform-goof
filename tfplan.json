{"format_version":"1.0","terraform_version":"1.1.6","variables":{"access_key":{"value":"***"},"ami":{"value":"ami-0a91cd140a1fc148a"},"region":{"value":"us-west-1"},"s3_acl":{"value":"public-read-write"},"secret_key":{"value":"***"}},"planned_values":{"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.instance.aws_instance.this[0]","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0a91cd140a1fc148a","credit_specification":[{"cpu_credits":null}],"enclave_options":[{}],"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"source_dest_check":true,"subnet_id":"subnet-0b7e1311a8f11c812","tags":{"Environment":"dev","Name":"example-server","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"example-server","Terraform":"true"},"timeouts":{"create":null,"delete":null,"update":null},"volume_tags":{"Name":"example-server"},"vpc_security_group_ids":["sg-05477069da560c45a"]},"sensitive_values":{"capacity_reservation_specification":[],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"metadata_options":[{}],"network_interface":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"timeouts":{},"volume_tags":{},"vpc_security_group_ids":[false]}}],"address":"module.instance"},{"resources":[{"address":"module.storage.aws_db_instance.km_db","mode":"managed","type":"aws_db_instance","name":"km_db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"address":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:us-west-1:300326902600:db:km-db-dev","auto_minor_version_upgrade":true,"availability_zone":"us-west-1a","backup_retention_period":0,"backup_window":"08:53-09:23","ca_cert_identifier":"rds-ca-2019","character_set_name":"","copy_tags_to_snapshot":false,"customer_owned_ip_enabled":false,"db_name":"km_db_dev","db_subnet_group_name":"km_rds_subnet_grp_dev","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enabled_cloudwatch_logs_exports":[],"endpoint":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","engine":"postgres","engine_version":"10.6","engine_version_actual":"10.17","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","hosted_zone_id":"Z10WI91S59XXQN","iam_database_authentication_enabled":false,"id":"km-db-dev","identifier":"km-db-dev","identifier_prefix":"","instance_class":"db.t3.medium","iops":0,"kms_key_id":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","latest_restorable_time":"0001-01-01T00:00:00Z","license_model":"postgresql-license","maintenance_window":"thu:07:39-thu:08:09","max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"name":"km_db_dev","nchar_character_set_name":"","option_group_name":"default:postgres-10","parameter_group_name":"default.postgres10","password":"supersecret","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":false,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-GOFOXBREVQ7VA3FPAU5KXJ4EWE","restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"tags_all":{"Name":"km_db_dev"},"timeouts":null,"timezone":"","username":"snyk","vpc_security_group_ids":["sg-019be67774996ca9d"]},"sensitive_values":{"enabled_cloudwatch_logs_exports":[],"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.storage.aws_db_subnet_group.km_rds_subnet_grp","mode":"managed","type":"aws_db_subnet_group","name":"km_rds_subnet_grp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-west-1:300326902600:subgrp:km_rds_subnet_grp_dev","description":"Managed by Terraform","id":"km_rds_subnet_grp_dev","name":"km_rds_subnet_grp_dev","name_prefix":null,"subnet_ids":["subnet-00eec7bb5a2cfcf87","subnet-0b7e1311a8f11c812"],"tags":{"Name":"km_rds_subnet_grp_dev"},"tags_all":{"Name":"km_rds_subnet_grp_dev"}},"sensitive_values":{"subnet_ids":[false,false],"tags":{},"tags_all":{}}},{"address":"module.storage.aws_kms_key.km_db_kms_key","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"id":"6ef3a755-df1e-4316-937b-e4661eec79f8","is_enabled":true,"key_id":"6ef3a755-df1e-4316-937b-e4661eec79f8","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::300326902600:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"km_db_kms_key_dev"},"tags_all":{"Name":"km_db_kms_key_dev"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.storage.aws_s3_bucket.km_blob_storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"public-read-write","arn":"arn:aws:s3:::km-blob-storage-dev-demo","bucket":"km-blob-storage-dev-demo","bucket_domain_name":"km-blob-storage-dev-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-blob-storage-dev-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-blob-storage-dev-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"tags_all":{"name":"km_blob_storage_dev"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.storage.aws_s3_bucket.km_public_blob","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::km-public-blob-demo","bucket":"km-public-blob-demo","bucket_domain_name":"km-public-blob-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-public-blob-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-public-blob-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.storage.aws_s3_bucket_public_access_block.km_public_blob","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":false,"block_public_policy":false,"bucket":"km-public-blob-demo","id":"km-public-blob-demo","ignore_public_acls":false,"restrict_public_buckets":false},"sensitive_values":{}},{"address":"module.storage.aws_security_group.km_rds_sg","mode":"managed","type":"aws_security_group","name":"km_rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-019be67774996ca9d","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-019be67774996ca9d","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"km_rds_sg","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{"Name":"km_rds_sg_dev"},"tags_all":{"Name":"km_rds_sg_dev"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_host","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_HOST","data_type":"text","description":"Kai Monkey Database","id":"/km-dev/DB_HOST","key_id":"alias/aws/ssm","name":"/km-dev/DB_HOST","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","version":1},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_name","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_name","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_NAME","data_type":"text","description":"Kai Monkey Database Name","id":"/km-dev/DB_NAME","key_id":"alias/aws/ssm","name":"/km-dev/DB_NAME","overwrite":null,"tags":{"environment":"dev"},"tags_all":{"environment":"dev"},"tier":"Standard","type":"SecureString","value":"km_db_dev","version":1},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_password","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_password","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_PASSWORD","data_type":"text","description":"Kai Monkey Database Password","id":"/km-dev/DB_PASSWORD","key_id":"alias/aws/ssm","name":"/km-dev/DB_PASSWORD","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"supersecret","version":1},"sensitive_values":{"tags":{},"tags_all":{},"value":true}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_user","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_user","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_USER","data_type":"text","description":"Kai Monkey Database Username","id":"/km-dev/DB_USER","key_id":"alias/aws/ssm","name":"/km-dev/DB_USER","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"snyk","version":1},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.storage"},{"resources":[{"address":"module.subnet.aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-0b7e1311a8f11c812","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","availability_zone_id":"usw1-az1","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0b7e1311a8f11c812","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.subnet.aws_subnet.secondary","mode":"managed","type":"aws_subnet","name":"secondary","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-00eec7bb5a2cfcf87","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","availability_zone_id":"usw1-az3","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-00eec7bb5a2cfcf87","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.subnet"},{"resources":[{"address":"module.vpc.aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-05477069da560c45a","description":"default VPC security group","egress":[],"id":"sg-05477069da560c45a","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-04593f1b67fb53be6","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-04593f1b67fb53be6","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-0334b084c69e30f75","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0334b084c69e30f75","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:vpc/vpc-0167776c8cf77f12d","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08a816c14c9d7ccbf","default_route_table_id":"rtb-06ac2b3302de99ab9","default_security_group_id":"sg-05477069da560c45a","dhcp_options_id":"dopt-5fb3eb38","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-0167776c8cf77f12d","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-06ac2b3302de99ab9","owner_id":"300326902600","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_drift":[{"address":"module.storage.aws_db_instance.km_db","module_address":"module.storage","mode":"managed","type":"aws_db_instance","name":"km_db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"address":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:us-west-1:300326902600:db:km-db-dev","auto_minor_version_upgrade":true,"availability_zone":"us-west-1a","backup_retention_period":0,"backup_window":"08:53-09:23","ca_cert_identifier":"rds-ca-2019","character_set_name":"","copy_tags_to_snapshot":false,"customer_owned_ip_enabled":false,"db_name":null,"db_subnet_group_name":"km_rds_subnet_grp_dev","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enabled_cloudwatch_logs_exports":[],"endpoint":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","engine":"postgres","engine_version":"10.6","engine_version_actual":"10.6","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","hosted_zone_id":"Z10WI91S59XXQN","iam_database_authentication_enabled":false,"id":"km-db-dev","identifier":"km-db-dev","identifier_prefix":null,"instance_class":"db.t3.medium","iops":0,"kms_key_id":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","latest_restorable_time":"0001-01-01T00:00:00Z","license_model":"postgresql-license","maintenance_window":"thu:07:39-thu:08:09","max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"name":"km_db_dev","nchar_character_set_name":"","option_group_name":"default:postgres-10","parameter_group_name":"default.postgres10","password":"supersecret","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":false,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-GOFOXBREVQ7VA3FPAU5KXJ4EWE","restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"tags_all":{"Name":"km_db_dev"},"timeouts":null,"timezone":"","username":"snyk","vpc_security_group_ids":["sg-019be67774996ca9d"]},"after":{"address":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:us-west-1:300326902600:db:km-db-dev","auto_minor_version_upgrade":true,"availability_zone":"us-west-1a","backup_retention_period":0,"backup_window":"08:53-09:23","ca_cert_identifier":"rds-ca-2019","character_set_name":"","copy_tags_to_snapshot":false,"customer_owned_ip_enabled":false,"db_name":"km_db_dev","db_subnet_group_name":"km_rds_subnet_grp_dev","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enabled_cloudwatch_logs_exports":[],"endpoint":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","engine":"postgres","engine_version":"10.17","engine_version_actual":"10.17","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","hosted_zone_id":"Z10WI91S59XXQN","iam_database_authentication_enabled":false,"id":"km-db-dev","identifier":"km-db-dev","identifier_prefix":"","instance_class":"db.t3.medium","iops":0,"kms_key_id":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","latest_restorable_time":"0001-01-01T00:00:00Z","license_model":"postgresql-license","maintenance_window":"thu:07:39-thu:08:09","max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"name":"km_db_dev","nchar_character_set_name":"","option_group_name":"default:postgres-10","parameter_group_name":"default.postgres10","password":"supersecret","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":false,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-GOFOXBREVQ7VA3FPAU5KXJ4EWE","restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"tags_all":{"Name":"km_db_dev"},"timeouts":null,"timezone":"","username":"snyk","vpc_security_group_ids":["sg-019be67774996ca9d"]},"after_unknown":{},"before_sensitive":{"enabled_cloudwatch_logs_exports":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"enabled_cloudwatch_logs_exports":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.storage.aws_kms_key.km_db_kms_key","module_address":"module.storage","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"id":"6ef3a755-df1e-4316-937b-e4661eec79f8","is_enabled":true,"key_id":"6ef3a755-df1e-4316-937b-e4661eec79f8","key_usage":"ENCRYPT_DECRYPT","multi_region":null,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::300326902600:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"km_db_kms_key_dev"},"tags_all":{"Name":"km_db_kms_key_dev"}},"after":{"arn":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"id":"6ef3a755-df1e-4316-937b-e4661eec79f8","is_enabled":true,"key_id":"6ef3a755-df1e-4316-937b-e4661eec79f8","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::300326902600:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"km_db_kms_key_dev"},"tags_all":{"Name":"km_db_kms_key_dev"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.storage.aws_s3_bucket.km_blob_storage","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"acceleration_status":"","acl":"public-read-write","arn":"arn:aws:s3:::km-blob-storage-dev-demo","bucket":"km-blob-storage-dev-demo","bucket_domain_name":"km-blob-storage-dev-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-blob-storage-dev-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-blob-storage-dev-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"tags_all":{"name":"km_blob_storage_dev"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"public-read-write","arn":"arn:aws:s3:::km-blob-storage-dev-demo","bucket":"km-blob-storage-dev-demo","bucket_domain_name":"km-blob-storage-dev-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-blob-storage-dev-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-blob-storage-dev-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"tags_all":{"name":"km_blob_storage_dev"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.storage.aws_s3_bucket.km_public_blob","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::km-public-blob-demo","bucket":"km-public-blob-demo","bucket_domain_name":"km-public-blob-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-public-blob-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-public-blob-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":null,"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::km-public-blob-demo","bucket":"km-public-blob-demo","bucket_domain_name":"km-public-blob-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-public-blob-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-public-blob-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.subnet.aws_subnet.main","module_address":"module.subnet","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-0b7e1311a8f11c812","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","availability_zone_id":"usw1-az1","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":"","enable_dns64":null,"enable_resource_name_dns_a_record_on_launch":null,"enable_resource_name_dns_aaaa_record_on_launch":null,"id":"subnet-0b7e1311a8f11c812","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":null,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":null,"tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-0b7e1311a8f11c812","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","availability_zone_id":"usw1-az1","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0b7e1311a8f11c812","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.subnet.aws_subnet.secondary","module_address":"module.subnet","mode":"managed","type":"aws_subnet","name":"secondary","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-00eec7bb5a2cfcf87","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","availability_zone_id":"usw1-az3","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":"","enable_dns64":null,"enable_resource_name_dns_a_record_on_launch":null,"enable_resource_name_dns_aaaa_record_on_launch":null,"id":"subnet-00eec7bb5a2cfcf87","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":null,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":null,"tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-00eec7bb5a2cfcf87","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","availability_zone_id":"usw1-az3","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-00eec7bb5a2cfcf87","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.example","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:vpc/vpc-0167776c8cf77f12d","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08a816c14c9d7ccbf","default_route_table_id":"rtb-06ac2b3302de99ab9","default_security_group_id":"sg-05477069da560c45a","dhcp_options_id":"dopt-5fb3eb38","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-0167776c8cf77f12d","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"main_route_table_id":"rtb-06ac2b3302de99ab9","owner_id":"300326902600","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:vpc/vpc-0167776c8cf77f12d","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08a816c14c9d7ccbf","default_route_table_id":"rtb-06ac2b3302de99ab9","default_security_group_id":"sg-05477069da560c45a","dhcp_options_id":"dopt-5fb3eb38","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-0167776c8cf77f12d","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-06ac2b3302de99ab9","owner_id":"300326902600","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}}],"resource_changes":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false},"after":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.instance.aws_instance.this[0]","module_address":"module.instance","mode":"managed","type":"aws_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0a91cd140a1fc148a","credit_specification":[{"cpu_credits":null}],"enclave_options":[{}],"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_put_response_hop_limit":1,"http_tokens":"optional","instance_metadata_tags":"disabled"}],"monitoring":false,"source_dest_check":true,"subnet_id":"subnet-0b7e1311a8f11c812","tags":{"Environment":"dev","Name":"example-server","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"example-server","Terraform":"true"},"timeouts":{"create":null,"delete":null,"update":null},"volume_tags":{"Name":"example-server"},"vpc_security_group_ids":["sg-05477069da560c45a"]},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[{}],"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":[{"enabled":true}],"ephemeral_block_device":true,"host_id":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"metadata_options":[{}],"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"tags":{},"tags_all":{},"tenancy":true,"timeouts":{},"user_data":true,"user_data_base64":true,"volume_tags":{},"vpc_security_group_ids":[false]},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"credit_specification":[{}],"ebs_block_device":[],"enclave_options":[{}],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"metadata_options":[{}],"network_interface":[],"root_block_device":[],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"timeouts":{},"volume_tags":{},"vpc_security_group_ids":[false]}}},{"address":"module.storage.aws_db_instance.km_db","module_address":"module.storage","mode":"managed","type":"aws_db_instance","name":"km_db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"address":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:us-west-1:300326902600:db:km-db-dev","auto_minor_version_upgrade":true,"availability_zone":"us-west-1a","backup_retention_period":0,"backup_window":"08:53-09:23","ca_cert_identifier":"rds-ca-2019","character_set_name":"","copy_tags_to_snapshot":false,"customer_owned_ip_enabled":false,"db_name":"km_db_dev","db_subnet_group_name":"km_rds_subnet_grp_dev","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enabled_cloudwatch_logs_exports":[],"endpoint":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","engine":"postgres","engine_version":"10.17","engine_version_actual":"10.17","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","hosted_zone_id":"Z10WI91S59XXQN","iam_database_authentication_enabled":false,"id":"km-db-dev","identifier":"km-db-dev","identifier_prefix":"","instance_class":"db.t3.medium","iops":0,"kms_key_id":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","latest_restorable_time":"0001-01-01T00:00:00Z","license_model":"postgresql-license","maintenance_window":"thu:07:39-thu:08:09","max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"name":"km_db_dev","nchar_character_set_name":"","option_group_name":"default:postgres-10","parameter_group_name":"default.postgres10","password":"supersecret","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":false,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-GOFOXBREVQ7VA3FPAU5KXJ4EWE","restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"tags_all":{"Name":"km_db_dev"},"timeouts":null,"timezone":"","username":"snyk","vpc_security_group_ids":["sg-019be67774996ca9d"]},"after":{"address":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:us-west-1:300326902600:db:km-db-dev","auto_minor_version_upgrade":true,"availability_zone":"us-west-1a","backup_retention_period":0,"backup_window":"08:53-09:23","ca_cert_identifier":"rds-ca-2019","character_set_name":"","copy_tags_to_snapshot":false,"customer_owned_ip_enabled":false,"db_name":"km_db_dev","db_subnet_group_name":"km_rds_subnet_grp_dev","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enabled_cloudwatch_logs_exports":[],"endpoint":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","engine":"postgres","engine_version":"10.6","engine_version_actual":"10.17","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","hosted_zone_id":"Z10WI91S59XXQN","iam_database_authentication_enabled":false,"id":"km-db-dev","identifier":"km-db-dev","identifier_prefix":"","instance_class":"db.t3.medium","iops":0,"kms_key_id":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","latest_restorable_time":"0001-01-01T00:00:00Z","license_model":"postgresql-license","maintenance_window":"thu:07:39-thu:08:09","max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"name":"km_db_dev","nchar_character_set_name":"","option_group_name":"default:postgres-10","parameter_group_name":"default.postgres10","password":"supersecret","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":false,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-GOFOXBREVQ7VA3FPAU5KXJ4EWE","restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"tags_all":{"Name":"km_db_dev"},"timeouts":null,"timezone":"","username":"snyk","vpc_security_group_ids":["sg-019be67774996ca9d"]},"after_unknown":{},"before_sensitive":{"enabled_cloudwatch_logs_exports":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"enabled_cloudwatch_logs_exports":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.storage.aws_db_subnet_group.km_rds_subnet_grp","module_address":"module.storage","mode":"managed","type":"aws_db_subnet_group","name":"km_rds_subnet_grp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:rds:us-west-1:300326902600:subgrp:km_rds_subnet_grp_dev","description":"Managed by Terraform","id":"km_rds_subnet_grp_dev","name":"km_rds_subnet_grp_dev","name_prefix":null,"subnet_ids":["subnet-00eec7bb5a2cfcf87","subnet-0b7e1311a8f11c812"],"tags":{"Name":"km_rds_subnet_grp_dev"},"tags_all":{"Name":"km_rds_subnet_grp_dev"}},"after":{"arn":"arn:aws:rds:us-west-1:300326902600:subgrp:km_rds_subnet_grp_dev","description":"Managed by Terraform","id":"km_rds_subnet_grp_dev","name":"km_rds_subnet_grp_dev","name_prefix":null,"subnet_ids":["subnet-00eec7bb5a2cfcf87","subnet-0b7e1311a8f11c812"],"tags":{"Name":"km_rds_subnet_grp_dev"},"tags_all":{"Name":"km_rds_subnet_grp_dev"}},"after_unknown":{},"before_sensitive":{"subnet_ids":[false,false],"tags":{},"tags_all":{}},"after_sensitive":{"subnet_ids":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.storage.aws_kms_key.km_db_kms_key","module_address":"module.storage","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"id":"6ef3a755-df1e-4316-937b-e4661eec79f8","is_enabled":true,"key_id":"6ef3a755-df1e-4316-937b-e4661eec79f8","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::300326902600:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"km_db_kms_key_dev"},"tags_all":{"Name":"km_db_kms_key_dev"}},"after":{"arn":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"id":"6ef3a755-df1e-4316-937b-e4661eec79f8","is_enabled":true,"key_id":"6ef3a755-df1e-4316-937b-e4661eec79f8","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::300326902600:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"km_db_kms_key_dev"},"tags_all":{"Name":"km_db_kms_key_dev"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.storage.aws_s3_bucket.km_blob_storage","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"public-read-write","arn":"arn:aws:s3:::km-blob-storage-dev-demo","bucket":"km-blob-storage-dev-demo","bucket_domain_name":"km-blob-storage-dev-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-blob-storage-dev-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-blob-storage-dev-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"tags_all":{"name":"km_blob_storage_dev"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"public-read-write","arn":"arn:aws:s3:::km-blob-storage-dev-demo","bucket":"km-blob-storage-dev-demo","bucket_domain_name":"km-blob-storage-dev-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-blob-storage-dev-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-blob-storage-dev-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"tags_all":{"name":"km_blob_storage_dev"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.storage.aws_s3_bucket.km_public_blob","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::km-public-blob-demo","bucket":"km-public-blob-demo","bucket_domain_name":"km-public-blob-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-public-blob-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-public-blob-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::km-public-blob-demo","bucket":"km-public-blob-demo","bucket_domain_name":"km-public-blob-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-public-blob-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-public-blob-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.storage.aws_s3_bucket_public_access_block.km_public_blob","module_address":"module.storage","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"block_public_acls":false,"block_public_policy":false,"bucket":"km-public-blob-demo","id":"km-public-blob-demo","ignore_public_acls":false,"restrict_public_buckets":false},"after":{"block_public_acls":false,"block_public_policy":false,"bucket":"km-public-blob-demo","id":"km-public-blob-demo","ignore_public_acls":false,"restrict_public_buckets":false},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.storage.aws_security_group.km_rds_sg","module_address":"module.storage","mode":"managed","type":"aws_security_group","name":"km_rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-019be67774996ca9d","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-019be67774996ca9d","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"km_rds_sg","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{"Name":"km_rds_sg_dev"},"tags_all":{"Name":"km_rds_sg_dev"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-019be67774996ca9d","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-019be67774996ca9d","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"km_rds_sg","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{"Name":"km_rds_sg_dev"},"tags_all":{"Name":"km_rds_sg_dev"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_host","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_host","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_HOST","data_type":"text","description":"Kai Monkey Database","id":"/km-dev/DB_HOST","key_id":"alias/aws/ssm","name":"/km-dev/DB_HOST","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_HOST","data_type":"text","description":"Kai Monkey Database","id":"/km-dev/DB_HOST","key_id":"alias/aws/ssm","name":"/km-dev/DB_HOST","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","version":1},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{},"value":true},"after_sensitive":{"tags":{},"tags_all":{},"value":true}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_name","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_name","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_NAME","data_type":"text","description":"Kai Monkey Database Name","id":"/km-dev/DB_NAME","key_id":"alias/aws/ssm","name":"/km-dev/DB_NAME","overwrite":null,"tags":{"environment":"dev"},"tags_all":{"environment":"dev"},"tier":"Standard","type":"SecureString","value":"km_db_dev","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_NAME","data_type":"text","description":"Kai Monkey Database Name","id":"/km-dev/DB_NAME","key_id":"alias/aws/ssm","name":"/km-dev/DB_NAME","overwrite":null,"tags":{"environment":"dev"},"tags_all":{"environment":"dev"},"tier":"Standard","type":"SecureString","value":"km_db_dev","version":1},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{},"value":true},"after_sensitive":{"tags":{},"tags_all":{},"value":true}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_password","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_password","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_PASSWORD","data_type":"text","description":"Kai Monkey Database Password","id":"/km-dev/DB_PASSWORD","key_id":"alias/aws/ssm","name":"/km-dev/DB_PASSWORD","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"supersecret","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_PASSWORD","data_type":"text","description":"Kai Monkey Database Password","id":"/km-dev/DB_PASSWORD","key_id":"alias/aws/ssm","name":"/km-dev/DB_PASSWORD","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"supersecret","version":1},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{},"value":true},"after_sensitive":{"tags":{},"tags_all":{},"value":true}}},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_user","module_address":"module.storage","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_user","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_USER","data_type":"text","description":"Kai Monkey Database Username","id":"/km-dev/DB_USER","key_id":"alias/aws/ssm","name":"/km-dev/DB_USER","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"snyk","version":1},"after":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_USER","data_type":"text","description":"Kai Monkey Database Username","id":"/km-dev/DB_USER","key_id":"alias/aws/ssm","name":"/km-dev/DB_USER","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"snyk","version":1},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{},"value":true},"after_sensitive":{"tags":{},"tags_all":{},"value":true}}},{"address":"module.subnet.aws_subnet.main","module_address":"module.subnet","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-0b7e1311a8f11c812","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","availability_zone_id":"usw1-az1","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0b7e1311a8f11c812","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-0b7e1311a8f11c812","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","availability_zone_id":"usw1-az1","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0b7e1311a8f11c812","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.subnet.aws_subnet.secondary","module_address":"module.subnet","mode":"managed","type":"aws_subnet","name":"secondary","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-00eec7bb5a2cfcf87","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","availability_zone_id":"usw1-az3","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-00eec7bb5a2cfcf87","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-00eec7bb5a2cfcf87","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","availability_zone_id":"usw1-az3","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-00eec7bb5a2cfcf87","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_default_security_group.default","module_address":"module.vpc","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-05477069da560c45a","description":"default VPC security group","egress":[],"id":"sg-05477069da560c45a","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-05477069da560c45a","description":"default VPC security group","egress":[],"id":"sg-05477069da560c45a","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_security_group.allow_ssh","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-04593f1b67fb53be6","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-04593f1b67fb53be6","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-04593f1b67fb53be6","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-04593f1b67fb53be6","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-0334b084c69e30f75","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0334b084c69e30f75","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-0334b084c69e30f75","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0334b084c69e30f75","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"after_unknown":{},"before_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.example","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-west-1:300326902600:vpc/vpc-0167776c8cf77f12d","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08a816c14c9d7ccbf","default_route_table_id":"rtb-06ac2b3302de99ab9","default_security_group_id":"sg-05477069da560c45a","dhcp_options_id":"dopt-5fb3eb38","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-0167776c8cf77f12d","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-06ac2b3302de99ab9","owner_id":"300326902600","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:ec2:us-west-1:300326902600:vpc/vpc-0167776c8cf77f12d","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08a816c14c9d7ccbf","default_route_table_id":"rtb-06ac2b3302de99ab9","default_security_group_id":"sg-05477069da560c45a","dhcp_options_id":"dopt-5fb3eb38","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-0167776c8cf77f12d","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-06ac2b3302de99ab9","owner_id":"300326902600","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.1.6","values":{"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_users_to_change_password":true,"expire_passwords":true,"hard_expiry":false,"id":"iam-account-password-policy","max_password_age":3,"minimum_password_length":8,"password_reuse_prevention":0,"require_lowercase_characters":false,"require_numbers":false,"require_symbols":false,"require_uppercase_characters":false},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.storage.aws_db_instance.km_db","mode":"managed","type":"aws_db_instance","name":"km_db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"address":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:us-west-1:300326902600:db:km-db-dev","auto_minor_version_upgrade":true,"availability_zone":"us-west-1a","backup_retention_period":0,"backup_window":"08:53-09:23","ca_cert_identifier":"rds-ca-2019","character_set_name":"","copy_tags_to_snapshot":false,"customer_owned_ip_enabled":false,"db_name":"km_db_dev","db_subnet_group_name":"km_rds_subnet_grp_dev","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enabled_cloudwatch_logs_exports":[],"endpoint":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","engine":"postgres","engine_version":"10.17","engine_version_actual":"10.17","final_snapshot_identifier":"km-db-dev-db-destroy-snapshot","hosted_zone_id":"Z10WI91S59XXQN","iam_database_authentication_enabled":false,"id":"km-db-dev","identifier":"km-db-dev","identifier_prefix":"","instance_class":"db.t3.medium","iops":0,"kms_key_id":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","latest_restorable_time":"0001-01-01T00:00:00Z","license_model":"postgresql-license","maintenance_window":"thu:07:39-thu:08:09","max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"name":"km_db_dev","nchar_character_set_name":"","option_group_name":"default:postgres-10","parameter_group_name":"default.postgres10","password":"supersecret","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":false,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-GOFOXBREVQ7VA3FPAU5KXJ4EWE","restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":true,"storage_type":"gp2","tags":{"Name":"km_db_dev"},"tags_all":{"Name":"km_db_dev"},"timeouts":null,"timezone":"","username":"snyk","vpc_security_group_ids":["sg-019be67774996ca9d"]},"sensitive_values":{"enabled_cloudwatch_logs_exports":[],"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"security_group_names":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.storage.aws_db_subnet_group.km_rds_subnet_grp","module.storage.aws_kms_key.km_db_kms_key","module.storage.aws_security_group.km_rds_sg","module.subnet.aws_subnet.main","module.subnet.aws_subnet.secondary","module.vpc.aws_vpc.example"]},{"address":"module.storage.aws_db_subnet_group.km_rds_subnet_grp","mode":"managed","type":"aws_db_subnet_group","name":"km_rds_subnet_grp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-west-1:300326902600:subgrp:km_rds_subnet_grp_dev","description":"Managed by Terraform","id":"km_rds_subnet_grp_dev","name":"km_rds_subnet_grp_dev","name_prefix":null,"subnet_ids":["subnet-00eec7bb5a2cfcf87","subnet-0b7e1311a8f11c812"],"tags":{"Name":"km_rds_subnet_grp_dev"},"tags_all":{"Name":"km_rds_subnet_grp_dev"}},"sensitive_values":{"subnet_ids":[false,false],"tags":{},"tags_all":{}},"depends_on":["module.subnet.aws_subnet.main","module.subnet.aws_subnet.secondary","module.vpc.aws_vpc.example"]},{"address":"module.storage.aws_kms_key.km_db_kms_key","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:kms:us-west-1:300326902600:key/6ef3a755-df1e-4316-937b-e4661eec79f8","bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":10,"description":"KMS Key for DB instance dev","enable_key_rotation":true,"id":"6ef3a755-df1e-4316-937b-e4661eec79f8","is_enabled":true,"key_id":"6ef3a755-df1e-4316-937b-e4661eec79f8","key_usage":"ENCRYPT_DECRYPT","multi_region":false,"policy":"{\"Id\":\"key-default-1\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::300326902600:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"km_db_kms_key_dev"},"tags_all":{"Name":"km_db_kms_key_dev"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.storage.aws_s3_bucket.km_blob_storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"public-read-write","arn":"arn:aws:s3:::km-blob-storage-dev-demo","bucket":"km-blob-storage-dev-demo","bucket_domain_name":"km-blob-storage-dev-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-blob-storage-dev-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-blob-storage-dev-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{"name":"km_blob_storage_dev"},"tags_all":{"name":"km_blob_storage_dev"},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.storage.aws_s3_bucket.km_public_blob","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":"private","arn":"arn:aws:s3:::km-public-blob-demo","bucket":"km-public-blob-demo","bucket_domain_name":"km-public-blob-demo.s3.amazonaws.com","bucket_prefix":null,"bucket_regional_domain_name":"km-public-blob-demo.s3.us-west-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[],"hosted_zone_id":"Z2F56UZL2M1ACD","id":"km-public-blob-demo","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":"","region":"us-west-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.storage.aws_s3_bucket_public_access_block.km_public_blob","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"km_public_blob","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":false,"block_public_policy":false,"bucket":"km-public-blob-demo","id":"km-public-blob-demo","ignore_public_acls":false,"restrict_public_buckets":false},"sensitive_values":{},"depends_on":["module.storage.aws_s3_bucket.km_public_blob"]},{"address":"module.storage.aws_security_group.km_rds_sg","mode":"managed","type":"aws_security_group","name":"km_rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-019be67774996ca9d","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-019be67774996ca9d","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"km_rds_sg","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{"Name":"km_rds_sg_dev"},"tags_all":{"Name":"km_rds_sg_dev"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_host","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_host","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_HOST","data_type":"text","description":"Kai Monkey Database","id":"/km-dev/DB_HOST","key_id":"alias/aws/ssm","name":"/km-dev/DB_HOST","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"km-db-dev.cayhnfm969us.us-west-1.rds.amazonaws.com:5432","version":1},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.storage.aws_db_instance.km_db","module.storage.aws_db_subnet_group.km_rds_subnet_grp","module.storage.aws_kms_key.km_db_kms_key","module.storage.aws_security_group.km_rds_sg","module.subnet.aws_subnet.main","module.subnet.aws_subnet.secondary","module.vpc.aws_vpc.example"]},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_name","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_name","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_NAME","data_type":"text","description":"Kai Monkey Database Name","id":"/km-dev/DB_NAME","key_id":"alias/aws/ssm","name":"/km-dev/DB_NAME","overwrite":null,"tags":{"environment":"dev"},"tags_all":{"environment":"dev"},"tier":"Standard","type":"SecureString","value":"km_db_dev","version":1},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.storage.aws_db_instance.km_db","module.storage.aws_db_subnet_group.km_rds_subnet_grp","module.storage.aws_kms_key.km_db_kms_key","module.storage.aws_security_group.km_rds_sg","module.subnet.aws_subnet.main","module.subnet.aws_subnet.secondary","module.vpc.aws_vpc.example"]},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_password","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_password","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_PASSWORD","data_type":"text","description":"Kai Monkey Database Password","id":"/km-dev/DB_PASSWORD","key_id":"alias/aws/ssm","name":"/km-dev/DB_PASSWORD","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"supersecret","version":1},"sensitive_values":{"tags":{},"tags_all":{},"value":true},"depends_on":["module.storage.aws_db_instance.km_db","module.storage.aws_db_subnet_group.km_rds_subnet_grp","module.storage.aws_kms_key.km_db_kms_key","module.storage.aws_security_group.km_rds_sg","module.subnet.aws_subnet.main","module.subnet.aws_subnet.secondary","module.vpc.aws_vpc.example"]},{"address":"module.storage.aws_ssm_parameter.km_ssm_db_user","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_user","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allowed_pattern":"","arn":"arn:aws:ssm:us-west-1:300326902600:parameter/km-dev/DB_USER","data_type":"text","description":"Kai Monkey Database Username","id":"/km-dev/DB_USER","key_id":"alias/aws/ssm","name":"/km-dev/DB_USER","overwrite":null,"tags":{},"tags_all":{},"tier":"Standard","type":"SecureString","value":"snyk","version":1},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.storage.aws_db_instance.km_db","module.storage.aws_db_subnet_group.km_rds_subnet_grp","module.storage.aws_kms_key.km_db_kms_key","module.storage.aws_security_group.km_rds_sg","module.subnet.aws_subnet.main","module.subnet.aws_subnet.secondary","module.vpc.aws_vpc.example"]}],"address":"module.storage"},{"resources":[{"address":"module.subnet.aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-0b7e1311a8f11c812","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1a","availability_zone_id":"usw1-az1","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0b7e1311a8f11c812","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.subnet.aws_subnet.secondary","mode":"managed","type":"aws_subnet","name":"secondary","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:subnet/subnet-00eec7bb5a2cfcf87","assign_ipv6_address_on_creation":false,"availability_zone":"us-west-1c","availability_zone_id":"usw1-az3","cidr_block":"10.0.64.0/19","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-00eec7bb5a2cfcf87","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"300326902600","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Main"},"tags_all":{"Name":"Main"},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.example"]}],"address":"module.subnet"},{"resources":[{"address":"module.vpc.aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-05477069da560c45a","description":"default VPC security group","egress":[],"id":"sg-05477069da560c45a","ingress":[{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":true,"to_port":0}],"name":"default","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.vpc.aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-04593f1b67fb53be6","description":"Allow SSH inbound from anywhere","egress":[],"id":"sg-04593f1b67fb53be6","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.vpc.aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:security-group/sg-0334b084c69e30f75","description":"Allow SSH inbound from specific range","egress":[],"id":"sg-0334b084c69e30f75","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"allow_ssh_with_valid_cidr","name_prefix":"","owner_id":"300326902600","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0167776c8cf77f12d"},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.example"]},{"address":"module.vpc.aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-west-1:300326902600:vpc/vpc-0167776c8cf77f12d","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08a816c14c9d7ccbf","default_route_table_id":"rtb-06ac2b3302de99ab9","default_security_group_id":"sg-05477069da560c45a","dhcp_options_id":"dopt-5fb3eb38","enable_classiclink":false,"enable_classiclink_dns_support":false,"enable_dns_hostnames":false,"enable_dns_support":true,"id":"vpc-0167776c8cf77f12d","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-06ac2b3302de99ab9","owner_id":"300326902600","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"access_key":{"references":["var.access_key"]},"region":{"references":["var.region"]},"secret_key":{"references":["var.secret_key"]},"skip_credentials_validation":{"constant_value":true},"skip_metadata_api_check":{"constant_value":true},"skip_requesting_account_id":{"constant_value":true}}},"module.instance:aws":{"name":"aws","version_constraint":"\u003e= 3.72.0","module_address":"module.instance"}},"root_module":{"resources":[{"address":"aws_iam_account_password_policy.strict","mode":"managed","type":"aws_iam_account_password_policy","name":"strict","provider_config_key":"aws","expressions":{"max_password_age":{"constant_value":3},"minimum_password_length":{"constant_value":8}},"schema_version":0}],"module_calls":{"instance":{"source":"terraform-aws-modules/ec2-instance/aws","expressions":{"ami":{"references":["var.ami"]},"instance_type":{"constant_value":"t2.micro"},"name":{"constant_value":"example-server"},"subnet_id":{"references":["module.subnet.subnet_id_main","module.subnet"]},"tags":{"constant_value":{"Environment":"dev","Terraform":"true"}},"vpc_security_group_ids":{"references":["module.vpc.vpc_sg_id","module.vpc"]}},"module":{"outputs":{"arn":{"expression":{"references":["aws_instance.this[0].arn","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].arn","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ARN of the instance"},"capacity_reservation_specification":{"expression":{"references":["aws_instance.this[0].capacity_reservation_specification","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].capacity_reservation_specification","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"Capacity reservation specification of the instance"},"id":{"expression":{"references":["aws_instance.this[0].id","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].id","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ID of the instance"},"instance_state":{"expression":{"references":["aws_instance.this[0].instance_state","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].instance_state","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The state of the instance. One of: `pending`, `running`, `shutting-down`, `terminated`, `stopping`, `stopped`"},"ipv6_addresses":{"expression":{"references":["aws_instance.this[0].ipv6_addresses","aws_instance.this[0]","aws_instance.this"]},"description":"The IPv6 address assigned to the instance, if applicable."},"outpost_arn":{"expression":{"references":["aws_instance.this[0].outpost_arn","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].outpost_arn","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ARN of the Outpost the instance is assigned to"},"password_data":{"expression":{"references":["aws_instance.this[0].password_data","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].password_data","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"Base-64 encoded encrypted password data for the instance. Useful for getting the administrator password for instances running Microsoft Windows. This attribute is only exported if `get_password_data` is true"},"primary_network_interface_id":{"expression":{"references":["aws_instance.this[0].primary_network_interface_id","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].primary_network_interface_id","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The ID of the instance's primary network interface"},"private_dns":{"expression":{"references":["aws_instance.this[0].private_dns","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].private_dns","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The private DNS name assigned to the instance. Can only be used inside the Amazon EC2, and only available if you've enabled DNS hostnames for your VPC"},"private_ip":{"expression":{"references":["aws_instance.this[0].private_ip","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].private_ip","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The private IP address assigned to the instance."},"public_dns":{"expression":{"references":["aws_instance.this[0].public_dns","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].public_dns","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The public DNS name assigned to the instance. For EC2-VPC, this is only available if you've enabled DNS hostnames for your VPC"},"public_ip":{"expression":{"references":["aws_instance.this[0].public_ip","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].public_ip","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The public IP address assigned to the instance, if applicable. NOTE: If you are using an aws_eip with your instance, you should refer to the EIP's address directly and not use `public_ip` as this field will change after the EIP is attached"},"spot_bid_status":{"expression":{"references":["aws_spot_instance_request.this[0].spot_bid_status","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The current bid status of the Spot Instance Request"},"spot_instance_id":{"expression":{"references":["aws_spot_instance_request.this[0].spot_instance_id","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The Instance ID (if any) that is currently fulfilling the Spot Instance request"},"spot_request_state":{"expression":{"references":["aws_spot_instance_request.this[0].spot_request_state","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"The current request state of the Spot Instance Request"},"tags_all":{"expression":{"references":["aws_instance.this[0].tags_all","aws_instance.this[0]","aws_instance.this","aws_spot_instance_request.this[0].tags_all","aws_spot_instance_request.this[0]","aws_spot_instance_request.this"]},"description":"A map of tags assigned to the resource, including those inherited from the provider default_tags configuration block"}},"resources":[{"address":"aws_instance.this","mode":"managed","type":"aws_instance","name":"this","provider_config_key":"instance:aws","expressions":{"ami":{"references":["var.ami"]},"associate_public_ip_address":{"references":["var.associate_public_ip_address"]},"availability_zone":{"references":["var.availability_zone"]},"cpu_core_count":{"references":["var.cpu_core_count"]},"cpu_threads_per_core":{"references":["var.cpu_threads_per_core"]},"credit_specification":[{"cpu_credits":{"references":["local.is_t_instance_type","var.cpu_credits"]}}],"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"enclave_options":[{"enabled":{"references":["var.enclave_options_enabled"]}}],"get_password_data":{"references":["var.get_password_data"]},"hibernation":{"references":["var.hibernation"]},"host_id":{"references":["var.host_id"]},"iam_instance_profile":{"references":["var.iam_instance_profile"]},"instance_initiated_shutdown_behavior":{"references":["var.instance_initiated_shutdown_behavior"]},"instance_type":{"references":["var.instance_type"]},"ipv6_address_count":{"references":["var.ipv6_address_count"]},"ipv6_addresses":{"references":["var.ipv6_addresses"]},"key_name":{"references":["var.key_name"]},"monitoring":{"references":["var.monitoring"]},"placement_group":{"references":["var.placement_group"]},"private_ip":{"references":["var.private_ip"]},"secondary_private_ips":{"references":["var.secondary_private_ips"]},"source_dest_check":{"references":["var.network_interface","var.source_dest_check"]},"subnet_id":{"references":["var.subnet_id"]},"tags":{"references":["var.name","var.tags"]},"tenancy":{"references":["var.tenancy"]},"timeouts":{"create":{"references":["var.timeouts"]},"delete":{"references":["var.timeouts"]},"update":{"references":["var.timeouts"]}},"user_data":{"references":["var.user_data"]},"user_data_base64":{"references":["var.user_data_base64"]},"volume_tags":{"references":["var.enable_volume_tags","var.name","var.volume_tags"]},"vpc_security_group_ids":{"references":["var.vpc_security_group_ids"]}},"schema_version":1,"count_expression":{"references":["var.create","var.create_spot_instance"]}},{"address":"aws_spot_instance_request.this","mode":"managed","type":"aws_spot_instance_request","name":"this","provider_config_key":"instance:aws","expressions":{"ami":{"references":["var.ami"]},"associate_public_ip_address":{"references":["var.associate_public_ip_address"]},"availability_zone":{"references":["var.availability_zone"]},"block_duration_minutes":{"references":["var.spot_block_duration_minutes"]},"cpu_core_count":{"references":["var.cpu_core_count"]},"cpu_threads_per_core":{"references":["var.cpu_threads_per_core"]},"credit_specification":[{"cpu_credits":{"references":["local.is_t_instance_type","var.cpu_credits"]}}],"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"enclave_options":[{"enabled":{"references":["var.enclave_options_enabled"]}}],"get_password_data":{"references":["var.get_password_data"]},"hibernation":{"references":["var.hibernation"]},"host_id":{"references":["var.host_id"]},"iam_instance_profile":{"references":["var.iam_instance_profile"]},"instance_initiated_shutdown_behavior":{"references":["var.instance_initiated_shutdown_behavior"]},"instance_interruption_behavior":{"references":["var.spot_instance_interruption_behavior"]},"instance_type":{"references":["var.instance_type"]},"ipv6_address_count":{"references":["var.ipv6_address_count"]},"ipv6_addresses":{"references":["var.ipv6_addresses"]},"key_name":{"references":["var.key_name"]},"launch_group":{"references":["var.spot_launch_group"]},"monitoring":{"references":["var.monitoring"]},"placement_group":{"references":["var.placement_group"]},"private_ip":{"references":["var.private_ip"]},"secondary_private_ips":{"references":["var.secondary_private_ips"]},"source_dest_check":{"references":["var.network_interface","var.source_dest_check"]},"spot_price":{"references":["var.spot_price"]},"spot_type":{"references":["var.spot_type"]},"subnet_id":{"references":["var.subnet_id"]},"tags":{"references":["var.name","var.tags"]},"tenancy":{"references":["var.tenancy"]},"timeouts":{"create":{"references":["var.timeouts"]},"delete":{"references":["var.timeouts"]}},"user_data":{"references":["var.user_data"]},"user_data_base64":{"references":["var.user_data_base64"]},"valid_from":{"references":["var.spot_valid_from"]},"valid_until":{"references":["var.spot_valid_until"]},"volume_tags":{"references":["var.enable_volume_tags","var.name","var.volume_tags"]},"vpc_security_group_ids":{"references":["var.vpc_security_group_ids"]},"wait_for_fulfillment":{"references":["var.spot_wait_for_fulfillment"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_spot_instance"]}}],"variables":{"ami":{"default":"","description":"ID of AMI to use for the instance"},"associate_public_ip_address":{"default":null,"description":"Whether to associate a public IP address with an instance in a VPC"},"availability_zone":{"default":null,"description":"AZ to start the instance in"},"capacity_reservation_specification":{"default":null,"description":"Describes an instance's Capacity Reservation targeting option"},"cpu_core_count":{"default":null,"description":"Sets the number of CPU cores for an instance."},"cpu_credits":{"default":null,"description":"The credit option for CPU usage (unlimited or standard)"},"cpu_threads_per_core":{"default":null,"description":"Sets the number of CPU threads per core for an instance (has no effect unless cpu_core_count is also set)."},"create":{"default":true,"description":"Whether to create an instance"},"create_spot_instance":{"default":false,"description":"Depicts if the instance is a spot instance"},"disable_api_termination":{"default":null,"description":"If true, enables EC2 Instance Termination Protection"},"ebs_block_device":{"default":[],"description":"Additional EBS block devices to attach to the instance"},"ebs_optimized":{"default":null,"description":"If true, the launched EC2 instance will be EBS-optimized"},"enable_volume_tags":{"default":true,"description":"Whether to enable volume tags (if enabled it conflicts with root_block_device tags)"},"enclave_options_enabled":{"default":null,"description":"Whether Nitro Enclaves will be enabled on the instance. Defaults to `false`"},"ephemeral_block_device":{"default":[],"description":"Customize Ephemeral (also known as Instance Store) volumes on the instance"},"get_password_data":{"default":null,"description":"If true, wait for password data to become available and retrieve it."},"hibernation":{"default":null,"description":"If true, the launched EC2 instance will support hibernation"},"host_id":{"default":null,"description":"ID of a dedicated host that the instance will be assigned to. Use when an instance is to be launched on a specific dedicated host"},"iam_instance_profile":{"default":null,"description":"IAM Instance Profile to launch the instance with. Specified as the name of the Instance Profile"},"instance_initiated_shutdown_behavior":{"default":null,"description":"Shutdown behavior for the instance. Amazon defaults this to stop for EBS-backed instances and terminate for instance-store instances. Cannot be set on instance-store instance"},"instance_type":{"default":"t3.micro","description":"The type of instance to start"},"ipv6_address_count":{"default":null,"description":"A number of IPv6 addresses to associate with the primary network interface. Amazon EC2 chooses the IPv6 addresses from the range of your subnet"},"ipv6_addresses":{"default":null,"description":"Specify one or more IPv6 addresses from the range of the subnet to associate with the primary network interface"},"key_name":{"default":null,"description":"Key name of the Key Pair to use for the instance; which can be managed using the `aws_key_pair` resource"},"launch_template":{"default":null,"description":"Specifies a Launch Template to configure the instance. Parameters configured on this resource will override the corresponding parameters in the Launch Template"},"metadata_options":{"default":{},"description":"Customize the metadata options of the instance"},"monitoring":{"default":false,"description":"If true, the launched EC2 instance will have detailed monitoring enabled"},"name":{"default":"","description":"Name to be used on EC2 instance created"},"network_interface":{"default":[],"description":"Customize network interfaces to be attached at instance boot time"},"placement_group":{"default":null,"description":"The Placement Group to start the instance in"},"private_ip":{"default":null,"description":"Private IP address to associate with the instance in a VPC"},"root_block_device":{"default":[],"description":"Customize details about the root block device of the instance. See Block Devices below for details"},"secondary_private_ips":{"default":null,"description":"A list of secondary private IPv4 addresses to assign to the instance's primary network interface (eth0) in a VPC. Can only be assigned to the primary network interface (eth0) attached at instance creation, not a pre-existing network interface i.e. referenced in a `network_interface block`"},"source_dest_check":{"default":true,"description":"Controls if traffic is routed to the instance when the destination address does not match the instance. Used for NAT or VPNs."},"spot_block_duration_minutes":{"default":null,"description":"The required duration for the Spot instances, in minutes. This value must be a multiple of 60 (60, 120, 180, 240, 300, or 360)"},"spot_instance_interruption_behavior":{"default":null,"description":"Indicates Spot instance behavior when it is interrupted. Valid values are `terminate`, `stop`, or `hibernate`"},"spot_launch_group":{"default":null,"description":"A launch group is a group of spot instances that launch together and terminate together. If left empty instances are launched and terminated individually"},"spot_price":{"default":null,"description":"The maximum price to request on the spot market. Defaults to on-demand price"},"spot_type":{"default":null,"description":"If set to one-time, after the instance is terminated, the spot request will be closed. Default `persistent`"},"spot_valid_from":{"default":null,"description":"The start date and time of the request, in UTC RFC3339 format(for example, YYYY-MM-DDTHH:MM:SSZ)"},"spot_valid_until":{"default":null,"description":"The end date and time of the request, in UTC RFC3339 format(for example, YYYY-MM-DDTHH:MM:SSZ)"},"spot_wait_for_fulfillment":{"default":null,"description":"If set, Terraform will wait for the Spot Request to be fulfilled, and will throw an error if the timeout of 10m is reached"},"subnet_id":{"default":null,"description":"The VPC Subnet ID to launch in"},"tags":{"default":{},"description":"A mapping of tags to assign to the resource"},"tenancy":{"default":null,"description":"The tenancy of the instance (if the instance is running in a VPC). Available values: default, dedicated, host."},"timeouts":{"default":{},"description":"Define maximum timeout for creating, updating, and deleting EC2 instance resources"},"user_data":{"default":null,"description":"The user data to provide when launching the instance. Do not pass gzip-compressed data via this argument; see user_data_base64 instead."},"user_data_base64":{"default":null,"description":"Can be used instead of user_data to pass base64-encoded binary data directly. Use this instead of user_data whenever the value is not a valid UTF-8 string. For example, gzip-encoded user data must be base64-encoded and passed via this argument to avoid corruption."},"volume_tags":{"default":{},"description":"A mapping of tags to assign to the devices created by the instance at launch time"},"vpc_security_group_ids":{"default":null,"description":"A list of security group IDs to associate with"}}}},"storage":{"source":"./modules/storage","expressions":{"acl":{"references":["var.s3_acl"]},"db_password":{"constant_value":"supersecret"},"db_username":{"constant_value":"snyk"},"environment":{"constant_value":"dev"},"private_subnet":{"references":["module.subnet.subnet_id_main","module.subnet","module.subnet.subnet_id_secondary","module.subnet"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"resources":[{"address":"aws_db_instance.km_db","mode":"managed","type":"aws_db_instance","name":"km_db","provider_config_key":"storage:aws","expressions":{"allocated_storage":{"constant_value":20},"db_name":{"references":["var.environment"]},"db_subnet_group_name":{"references":["aws_db_subnet_group.km_rds_subnet_grp.id","aws_db_subnet_group.km_rds_subnet_grp"]},"engine":{"constant_value":"postgres"},"engine_version":{"constant_value":"10.6"},"final_snapshot_identifier":{"references":["var.environment"]},"identifier":{"references":["var.environment"]},"instance_class":{"constant_value":"db.t3.medium"},"kms_key_id":{"references":["aws_kms_key.km_db_kms_key.arn","aws_kms_key.km_db_kms_key"]},"password":{"references":["var.db_password"]},"skip_final_snapshot":{"constant_value":true},"storage_encrypted":{"constant_value":true},"storage_type":{"constant_value":"gp2"},"tags":{"references":["var.default_tags","var.environment"]},"username":{"references":["var.db_username"]},"vpc_security_group_ids":{"references":["aws_security_group.km_rds_sg.id","aws_security_group.km_rds_sg"]}},"schema_version":1},{"address":"aws_db_subnet_group.km_rds_subnet_grp","mode":"managed","type":"aws_db_subnet_group","name":"km_rds_subnet_grp","provider_config_key":"storage:aws","expressions":{"name":{"references":["var.environment"]},"subnet_ids":{"references":["var.private_subnet"]},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_kms_key.km_db_kms_key","mode":"managed","type":"aws_kms_key","name":"km_db_kms_key","provider_config_key":"storage:aws","expressions":{"deletion_window_in_days":{"constant_value":10},"description":{"references":["var.environment"]},"enable_key_rotation":{"constant_value":true},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_s3_bucket.km_blob_storage","mode":"managed","type":"aws_s3_bucket","name":"km_blob_storage","provider_config_key":"storage:aws","expressions":{"bucket":{"references":["var.environment"]},"tags":{"references":["var.default_tags","var.environment"]}},"schema_version":0},{"address":"aws_s3_bucket.km_public_blob","mode":"managed","type":"aws_s3_bucket","name":"km_public_blob","provider_config_key":"storage:aws","expressions":{"bucket":{"constant_value":"km-public-blob-demo"}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.km_public_blob","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"km_public_blob","provider_config_key":"storage:aws","expressions":{"block_public_acls":{"constant_value":false},"block_public_policy":{"constant_value":false},"bucket":{"references":["aws_s3_bucket.km_public_blob.id","aws_s3_bucket.km_public_blob"]},"ignore_public_acls":{"references":["var.test"]}},"schema_version":0},{"address":"aws_security_group.km_rds_sg","mode":"managed","type":"aws_security_group","name":"km_rds_sg","provider_config_key":"storage:aws","expressions":{"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":5432,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":5432}]},"name":{"constant_value":"km_rds_sg"},"tags":{"references":["var.default_tags","var.environment"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_ssm_parameter.km_ssm_db_host","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_host","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db.endpoint","aws_db_instance.km_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.km_ssm_db_name","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_name","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database Name"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags","var.environment"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db.name","aws_db_instance.km_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.km_ssm_db_password","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_password","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database Password"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db.password","aws_db_instance.km_db"]}},"schema_version":0},{"address":"aws_ssm_parameter.km_ssm_db_user","mode":"managed","type":"aws_ssm_parameter","name":"km_ssm_db_user","provider_config_key":"storage:aws","expressions":{"description":{"constant_value":"Kai Monkey Database Username"},"name":{"references":["var.environment"]},"tags":{"references":["var.default_tags"]},"type":{"constant_value":"SecureString"},"value":{"references":["aws_db_instance.km_db.username","aws_db_instance.km_db"]}},"schema_version":0}],"variables":{"acl":{},"db_password":{},"db_username":{},"default_tags":{"default":{},"description":"default tags to resources"},"environment":{"description":"the type of environment (dev,staging/prod)"},"private_subnet":{},"test":{"default":false},"vpc_id":{}}}},"subnet":{"source":"./modules/subnet","expressions":{"region":{"references":["var.region"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"subnet_id_main":{"expression":{"references":["aws_subnet.main.id","aws_subnet.main"]}},"subnet_id_secondary":{"expression":{"references":["aws_subnet.secondary.id","aws_subnet.secondary"]}}},"resources":[{"address":"aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_config_key":"subnet:aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"references":["var.cidr_main"]},"tags":{"constant_value":{"Name":"Main"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_subnet.secondary","mode":"managed","type":"aws_subnet","name":"secondary","provider_config_key":"subnet:aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"references":["var.cidr_secondary"]},"tags":{"constant_value":{"Name":"Main"}},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1}],"variables":{"cidr_main":{"default":"10.0.0.0/24"},"cidr_secondary":{"default":"10.0.64.0/19"},"region":{},"vpc_id":{}}}},"vpc":{"source":"./modules/vpc","module":{"outputs":{"vpc_id":{"expression":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"vpc_sg_id":{"expression":{"references":["aws_default_security_group.default.id","aws_default_security_group.default"]}}},"resources":[{"address":"aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_config_key":"vpc:aws","expressions":{"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":true,"to_port":0}]},"vpc_id":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"schema_version":1},{"address":"aws_security_group.allow_ssh","mode":"managed","type":"aws_security_group","name":"allow_ssh","provider_config_key":"vpc:aws","expressions":{"description":{"constant_value":"Allow SSH inbound from anywhere"},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22}]},"name":{"constant_value":"allow_ssh"},"vpc_id":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"schema_version":1},{"address":"aws_security_group.allow_ssh_with_valid_cidr","mode":"managed","type":"aws_security_group","name":"allow_ssh_with_valid_cidr","provider_config_key":"vpc:aws","expressions":{"description":{"constant_value":"Allow SSH inbound from specific range"},"ingress":{"references":["var.cidr"]},"name":{"constant_value":"allow_ssh_with_valid_cidr"},"vpc_id":{"references":["aws_vpc.example.id","aws_vpc.example"]}},"schema_version":1},{"address":"aws_vpc.example","mode":"managed","type":"aws_vpc","name":"example","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.cidr"]}},"schema_version":1}],"variables":{"cidr":{"default":"10.0.0.0/16"}}}}},"variables":{"access_key":{},"ami":{"default":"ami-0a91cd140a1fc148a","description":"ami used for ec2 instance. example - ami-0a91cd140a1fc148a (Ubuntu 20.4 LTS)"},"region":{"default":"us-west-1"},"s3_acl":{"default":"public-read-write"},"secret_key":{}}}}}
